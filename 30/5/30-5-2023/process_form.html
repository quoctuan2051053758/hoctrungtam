<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="" id="form-info">
        Nhập họ tên:
        <input type="text" id="fullname">
        <br>
        Nhập tuổi: 
        <input type="text" id="age">
        <br>
        Chọn giới tính:
        <input type="radio" name="gender" value="0">Nam
        <input type="radio" name="gender" value="1">Nữ
        <br>
        <input type="submit" value="Show info">
    </form>
    <!-- thẻ chờ(không có nội dung) để đổ dữ liệu vào -->
    <h3 id="error" style="color: red;"></h3>
    <h3 id="result" style="color: green;"></h3>

    <script>
        // b1: lấy obj form:
        var obj_form = document.querySelector('#form-info')
        // b2: gắn sk submit cho obj form(sk submit chỉ áp dụng với thẻ form)
        obj_form.addEventListener('submit',function(){
            // quy trình xử lý form:
            // -b1: khai báo 2 biến lưu lỗi và kết quả sẽ hiển thị
            var error ='';
            var result ='';
            // b2: lấy obj và lấy giá trị các input trong form
            // lấy fullname
            var obj_fullname= document.querySelector('#fullname');
            var fullname = obj_fullname.value;
            // alert(fullname);
            var obj_age = document.querySelector('#age')
            var age = obj_age.value;
            // alert(age)
            // b3 : validate form:lọc dữ liệu đầu vào tránh dữ liệu rác và giúp bảo mật form
            // + tên và tuổi phải nhập: so sánh với chuỗi rỗng
            // + tên phải ít nhất 3 ký tự: .length
            // + tuổi phải là số:isNaN = is not a number
            // nếu có lỗi thì gán cho biến error
            if(fullname==''|| age==''){
                error ='tên tuổi phải nhập';
                obj_fullname.focus();
            }
            else if(fullname.length < 3){
                error ='tên phải ít nhất 3 ký tự';
                obj_fullname.focus();
            }
            else if(isNaN(age)==true){
                error ='tuổi phải là số'
                obj_age.focus()
            }
            // b4: xử lý logic chính(hiển thị dữ liệu)
            // chỉ khi hệ thống ko có lỗi nào xảy ra
            if(error==''){
                result+='tên của bạn: '+fullname
                result+='<br>'
                result+='tuổi của bạn: '+age;
            }
            // b5: hiển thị error và result ra màn hình
            // cần chuẩn bị html để đổ 2 biến ra
            // đổ error:
            var obj_error = document.querySelector('#error');
            obj_error.innerHTML= error; //innerText
            // + đổ result:
            var obj_result = document.querySelector('#result');
            obj_result.innerHTML=result;
            // hiện tại đang bị tình trạng hiển thị xong mất luôn? do hành vi mặc định của sự kiện submit là tải lại trang, cần ngăn ngừa hành vi mặc định này để giữ lại được hiển thị
            // event là 1 obj chỉ có sẵn bên trong hàm callback khi gọi sự kiện
            event.preventDefault();
            // khi code JS, cần cài đặt trình duyệt để lưu lại log lỗi sau mỗi lần tải lại trang
            // inspect -> console -> icon setting-> tích vào Preserve Log
        
        })
    </script>
</body>
</html>